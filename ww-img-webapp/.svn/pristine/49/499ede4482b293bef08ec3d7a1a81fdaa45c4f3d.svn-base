package com.zb.service.image.spoof;

import java.awt.Color;
import java.awt.Font;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import com.zb.service.cloud.StorageService;
import com.zb.service.image.BaseTool;
import com.zb.service.image.SimplePositions;
import com.zb.service.image.ZbFont;
import com.zb.service.image.i.TwoDraw;

public class XiaoRenDouQuJuPaiTool extends BaseTool implements TwoDraw {
	public XiaoRenDouQuJuPaiTool(StorageService storageService) {
		super(storageService);
	}

	public XiaoRenDouQuJuPaiTool() {
		super();
	}

	public static void main(String[] args) throws IOException {

		// String tmpPath0 = "米黄色背景.png";
		StorageService storageService = new StorageService();
		XiaoRenDouQuJuPaiTool tyt = new XiaoRenDouQuJuPaiTool(storageService);
		tyt.isDebug(true);
		int i = 7;
		System.out.println(tyt.draw("祝你开心每一天，每天都有好心情！", S[i], T[i], null));
	}

	static ZbFont zbfont = ZbFont.黑体;
	static int fontSize = 36;
	static Color color = new Color(0, 0, 0);
	static int fontType = Font.BOLD;
	static String T[] = {
			"http://imgzb.zhuangdianbi.com/5770efb10cf2b9c850bc1c5f",
			"http://imgzb.zhuangdianbi.com/5770efc10cf2b9c850bc1c66",
			"http://imgzb.zhuangdianbi.com/5770efce0cf2b9c850bc1c78",
			"http://imgzb.zhuangdianbi.com/5770efdc0cf2b9c850bc1c88",
			"http://imgzb.zhuangdianbi.com/5770efe60cf2b9c850bc1c9a",
			"http://imgzb.zhuangdianbi.com/5770eff00cf2b9c850bc1ca4",
			"http://imgzb.zhuangdianbi.com/5770effb0cf2b9c850bc1caf",
			"http://imgzb.zhuangdianbi.com/5770f0070cf2b9c850bc1cbb",
			"http://imgzb.zhuangdianbi.com/5770f0100cf2b9c850bc1cc5",
			"http://imgzb.zhuangdianbi.com/5770f01a0cf2b9c850bc1ccb" };
	static String S[] = { "白色背景", "橙色背景", "粉色背景", "红色背景", "绿色背景", "米黄色背景",
			"墨绿色背景", "浅蓝色背景", "深米黄色背景", "紫色背景" };

	static List<String> listXiaoRen = new ArrayList<String>();
	static {
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f02a0cf2b9c850bc1cde");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0360cf2b9c850bc1ce6");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0420cf2b9c850bc1cf2");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f04c0cf2b9c850bc1cfb");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f05b0cf2b9c850bc1d0b");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0640cf2b9c850bc1d15");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f06e0cf2b9c850bc1d23");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0790cf2b9c850bc1d2b");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0840cf2b9c850bc1d2f");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f08e0cf2b9c850bc1d3d");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0980cf2b9c850bc1d4f");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0a90cf2b9c850bc1d64");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0b30cf2b9c850bc1d6c");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0bf0cf2b9c850bc1d77");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0cd0cf2b9c850bc1d86");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0d70cf2b9c850bc1d90");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0e30cf2b9c850bc1d9e");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0ed0cf2b9c850bc1da9");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f0f90cf2b9c850bc1db5");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1030cf2b9c850bc1dbb");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f10e0cf2b9c850bc1dc5");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1190cf2b9c850bc1dce");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1250cf2b9c850bc1ddb");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1320cf2b9c850bc1def");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1400cf2b9c850bc1dfd");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f14e0cf2b9c850bc1e10");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f15c0cf2b9c850bc1e1d");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1680cf2b9c850bc1e2b");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1790cf2b9c850bc1e41");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1850cf2b9c850bc1e4a");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1900cf2b9c850bc1e54");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f19b0cf2b9c850bc1e63");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1a60cf2b9c850bc1e70");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1b70cf2b9c850bc1e78");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1c10cf2b9c850bc1e86");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1cd0cf2b9c850bc1e92");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f1dc0cf2b9c850bc1e9d");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f2bf0cf2b9c850bc1f79");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f2a50cf2b9c850bc1f5b");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f2880cf2b9c850bc1f34");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f2780cf2b9c850bc1f21");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f26c0cf2b9c850bc1f15");
		listXiaoRen
				.add("http://imgzb.zhuangdianbi.com/5770f25d0cf2b9c850bc1f0c");
	}

	static Random rand = new Random();

	@Override
	public String draw(String one, String two, String tmpBackPic, String count)
			throws IOException {
		int len = one.length();

		// 随机几个小人
		List<String> listXiaoRen0 = new ArrayList<String>();

		while (listXiaoRen0.size() < len) {
			listXiaoRen0.add(listXiaoRen.get(rand.nextInt(listXiaoRen.size())));
		}

		SimplePositions[] sp = new SimplePositions[len * 2];
		BufferedImage[] bis = new BufferedImage[len * 2];

		int fontZuo = 70;
		int fontHeight = 85;
		int imgZuo = 60;
		int imgHeight = 120;

		int cFZ = 0;
		int cFH = 0;
		int cIZ = 0;
		int cIH = 0;

		int hLen = 130;

		int t = 0;
		for (int i = 0; i < len; i++) {
			if (i % 8 == 0) {
				cFZ = fontZuo;
				cFH = fontHeight + t * hLen;
				cIZ = imgZuo;
				cIH = imgHeight + t * hLen;
				t++;
			}
			SimplePositions nameSP1 = new SimplePositions();
			nameSP1.buildHorizontalOffset(cFZ).buildVerticalOffset(cFH);
			BufferedImage nameBI1 = drawText("" + one.charAt(i), zbfont,
					fontSize, color, 240, 100, 0.6, true, 20, 20);
			BufferedImage imgBI1 = super.getImg(listXiaoRen0.get(i));
			SimplePositions img1 = new SimplePositions();
			img1.buildHorizontalOffset(cIZ).buildVerticalOffset(cIH);

			sp[i * 2] = img1;
			sp[i * 2 + 1] = nameSP1;
			bis[i * 2] = imgBI1;
			bis[i * 2 + 1] = nameBI1;
			cFZ += 80;
			cFH += 30;
			cIZ += 80;
			cIH += 30;
		}
//		System.out.println(bis.length);
//		for (int i = 0; i < len * 2; i++) {
//
//			System.out.println(bis[i]);
//		}
		return super.getSaveFile(sp, bis, 0.95f, tmpBackPic);
	}

}
